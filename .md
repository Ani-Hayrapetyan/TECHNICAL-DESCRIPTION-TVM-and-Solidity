# TECHNICAL DESCRIPTION TVM and Solidity


### 1. About the Document
### 2. Purpose
### 3. Target Audience
### 4. General Description of the Solidity System
### 5. General Description of the TVM
#### 5.1 TVM features
#### 5.2 New functionality in the TVM-adapted version
### 6. Differences between Solidity and TVM
### 7. Extensions introduced by TVM compared to Solidity
### 8. Limitations of TVM compared to Solidity




### 1. About the Document

This document provides an overview of the TVM-adapted version of the Solidity programming language. It highlights the technical differences from standard Solidity, the changes made in the TVM version, and the new features it offers.



### 2. Purpose

The goal of this document is to help developers who are already familiar with Solidity quickly understand how these changes affect smart contract development on the TVM platform, what new possibilities they offer, and what limitations they should be aware of.



### 3. Target Audience

The intended audience for this document includes software developers, blockchain engineers, and technical architects who have experience with Solidity and are interested in deploying smart contracts on TVM. It is designed to be a practical guide, highlighting not only the differences but also the best practices for writing, testing, and optimizing contracts in this environment. By providing clear explanations, examples, and recommendations, this document aims to accelerate the learning curve and facilitate a smooth transition from standard Solidity to TVM-based development.



### 4. General Description of the Solidity System

Solidity is an object-oriented, high-level language for implementing smart contracts. Smart contracts are programs that govern the behavior of accounts within the Ethereum state. It provides a high-level abstraction while giving precise control over storage, execution, and transaction flow.

Key characteristics of the Solidity system include:

- **Contract-Oriented Architecture:** Smart contracts serve as self-contained units encapsulating state variables, functions, and events. This modular design enables code reuse and logical separation of responsibilities.

- **Static Typing and Safety:** Solidity enforces type checking at compile-time, minimizing runtime errors and improving code reliability.

- **Inheritance and Interfaces:** The language supports multiple inheritance and interface definitions, allowing developers to build modular, extendable, and interoperable contract systems.

- **Event Logging:** Contracts can emit events that external applications can subscribe to, enabling monitoring, notifications, and integration with off-chain services.

- **Rich Standard Library:** Built-in types _(uint, int, bool, address, bytes, string)_, mappings, arrays, and structures simplify contract logic. Cryptographic primitives and utility functions support secure contract development.

- **Execution Environment:** Solidity contracts compile to Ethereum Virtual Machine (EVM) bytecode, ensuring deterministic execution and gas-based resource management for predictable network performance and security.

Solidity’s design balances high-level abstraction with low-level control. It allows developers to implement a wide range of decentralized applications, including token contracts, decentralized finance protocols, games, and other blockchain-based systems. Its combination of modular structure, strong typing, and explicit control over execution makes it the primary choice for Ethereum smart contract development.

__**A Simple Smart Contract**__

`// SPDX-License-Identifier: GPL-3.0`

```javascript
pragma solidity >=0.4.16 <0.9.0;
contract SimpleStorage {
    uint storedData;

    function set(uint x) public {
        storedData = x;
    }

    function get() public view returns (uint) {
        return storedData;
    }
}
```






### 5. General Description of the TVM

The **TON Virtual Machine (TVM)** is a specialized virtual machine designed to execute smart contracts on the **TON/Everscale** blockchain platform. Unlike the Ethereum Virtual Machine (EVM), TVM is built around an **asynchronous message-passing model** and a **cell-based data structure**, which allows efficient storage, retrieval, and execution of decentralized programs.

Key characteristics of the TVM include:

- **Asynchronous Execution:** Each transaction corresponds to the processing of a single incoming message. Contracts cannot perform synchronous calls; all interactions occur through messages that are processed independently, ensuring scalability and resilience.

- **Cell-Based Storage:** TVM uses a hierarchical, tree-like structure of cells to store contract state and messages. This structure enables compact, efficient serialization and supports advanced operations like partial updates and proofs.

- **Gas and Resource Management:** TVM employs a gas-based execution model, allowing fine-grained control over computational and storage resources while preventing network abuse. Built-in instructions provide developers with tools to manage gas dynamically.

- **Low-Level Data Primitives:** TVM supports specialized types such as `cell`, `slice`, and `builder`, providing powerful mechanisms for data manipulation and contract optimization.

- **Extended ABI and Message Handling:** TVM contracts use a flexible ABI (Application Binary Interface) and can handle complex message formats, including internal and external messages, with optional flags controlling message behavior.

- **Security and Determinism:** The deterministic nature of TVM execution ensures predictable outcomes, while its model isolates contract execution, reducing attack surfaces and enhancing security.

The TVM is specifically optimized for high-throughput, decentralized applications on the TON/Everscale network. Its design allows developers to implement scalable, secure, and modular smart contracts while taking advantage of unique TVM features that differ from traditional EVM-based environments.


#### 5.1 TVM features



| **Feature** | **Description** |
|-------------|-----------------|
| **FunC and Fift language support** | Smart contracts are written in high-level FunC or low-level Fift, both compiled directly into TVM bytecode. |
| **Actor-based smart contract model** | Contracts operate as isolated actors communicating via asynchronous messages, enabling concurrency and high scalability. | 
| **Tree–based dictionaries** | Key–value structures used for contract storage, account metadata, and other internal data. |
| **Bag of Cells (BoC) data structure** | Data is stored in compact *cells* with up to 1023 bits and 4 references, forming a DAG. Enables efficient serialization and Merkle-friendly validation. |
| **Deterministic execution** | The same input always produces the same output, guaranteeing consistent execution across validators and supporting blockchain consensus. |
| **Persistent on-chain storage** | Contract state is stored in cells with efficient serialization/deserialization and dictionary support based on Patricia trees. |
| **Built-in cryptographic primitives** | Includes SHA256/SHA512 hashing, Ed25519 signature verification, big integer arithmetic, and bit-level operations optimized for on-chain use. |
| **Efficient on-chain serialization** | Supports flexible serialization of tuples, lists, maps, custom structures, and arbitrary bitstrings at bit-level precision. |



#### 5.2 New functionality in the TVM-adapted version




| **Feature / Enhancement** | **What’s new / Why important** |
|-------------|-----------------|
| **Ability to run TVM inside TVM (recursive execution / sandboxing) via** | The update enables contracts or code to invoke TVM execution from within TVM — useful for advanced use cases like dynamic code execution, contract factories, meta‑contracts, sandboxed execution scenarios. | (https://blog.ton.org/the-most-significant-tvm-update-comes-to-mainnet?utm_source=chatgpt.com)
| **Broader interoperability and cross‑chain compatibility** | Thanks to the newly added cryptographic primitives and hash functions, TVM now supports standards used by other blockchains (such as secp256k1, KECCAK, and BLAKE2b). This significantly improves interoperability, enabling smoother integrations, bridging, and cross-chain communication. | (https://blog.ton.org/the-most-significant-tvm-update-comes-to-mainnet?utm_source=chatgpt.com)
| **Extended cryptography & hash primitives** | Added support for many more cryptographic primitives: SHA‑256, SHA‑512, BLAKE2b, KECCAK256 / KECCAK512; plus support for elliptic‑curve cryptography on curves like secp256k1, secp256r1, Ristretto, and BLS12‑381 (pairing support). This enables interoperability with other blockchains, cross‑chain proofs, and advanced cryptography like zero‑knowledge proofs (ZKPs). | (https://blog.ton.org/the-most-significant-tvm-update-comes-to-mainnet?utm_source=chatgpt.com)
| **Improved fee & gas handling — more precise and flexible fee calculations** |With new fee‑calculation opcodes and expanded config data.| (https://blog.ton.org/the-most-significant-tvm-update-comes-to-mainnet?utm_source=chatgpt.com)


### 6. Differences between Solidity and TVM


Solidity and TVM are often confused, but they actually serve very different purposes. Solidity is a programming language used to write smart contract code, while TVM is the execution environment that runs that code. It’s similar to how JavaScript is a language, and the browser’s engine is what actually executes it.

**1. Different Layers: Solidity is a language, TVM is a virtual machine**

-  **Solidity** — high-level programming language (Ethereum smart contracts).

-  **TVM** — execution engine for smart contracts in the TON blockchain.

*Analogy:
Solidity = “what you write”
TVM = “what actually runs the code”*

**2. Different Blockchains, Different Architectures**

-  **Solidity** runs on the **Ethereum** blockchain and follows the rules of the EVM (Ethereum Virtual Machine).

-  **TVM**, on the other hand, runs on the **TON** blockchain and is built on a completely different architecture — a stack-based execution model combined with TON’s unique Bag-of-Cells storage format.
  
**3. Different languages and toolchains**

-   **Ethereum** contracts are written mainly in **Solidity**

-   **TON** contracts are written in **FunC** (main language, C-style)

**This means that Solidity does not work on TON.**

**4. Flexibility of data serialization**

In **TON**, you can serialize anything bit-by-bit, while in **Solidity** you cannot.

**5. Different execution models**

**Solidity/EVM:**

-   transaction-based execution

-   synchronous execution

**TVM:**

-   actor model (contracts send asynchronous messages)

-   stack-based VM

-   gas is consumed per instruction, but message flow is async

**6. Very different data models**

-   **Solidity/EVM** uses 256-bit word system and flat storage slots


-    **TVM** uses cells (Bag of Cells) 





  ###### **Solidity vs TVM — Comparison Table**

| **Category** | **Solidity / EVM** | **TVM / TON** |
|--------------|---------------------|---------------|
| **Layer / Role** | Solidity is a high-level programming language used for Ethereum smart contracts. | TVM is the execution engine for smart contracts in the TON blockchain. |
| **Blockchain & Architecture** | Runs on Ethereum and follows the EVM architecture. | Runs on TON and uses a stack-based model + Bag-of-Cells storage. |
| **Languages & Toolchains** | Contracts are written mainly in Solidity. | Contracts are written in FunC (main language) or other TON languages. |
| **Data Serialization** | Cannot serialize data bit-by-bit; uses fixed 256-bit words. | Allows bit-level serialization; highly flexible and compact. |
| **Execution Model** | Transaction-based, synchronous execution. | Actor model with asynchronous messaging; stack-based VM. |
| **Data Model** | Uses 256-bit words and flat storage slots. | Uses cells (Bag-of-Cells), a graph-based, highly compact storage format. |


### 7. Extensions introduced by TVM compared to Solidity

**TVM** gives developers several powerful capabilities that you just don’t get with **Solidity** on the **EVM**. Here are the most important extensions․

**TVM** gives you more control, more flexibility, and more powerful tools, especially when it comes to:

-   data layout
-   cryptography
-   serialization
-   asynchronous logic

**TVM** is simply a more expressive, more flexible environment designed for high-performance blockchain applications.

**TVM** gives developers several powerful capabilities that you just don’t get with **Solidity** on the **EVM**. Here are the most important extensions.

**1. Asynchronous smart contract communication**

In **TVM**, contracts send messages, not synchronous calls.

This enables:

-  parallel execution

-  safer contract interactions 

no “everything stops” failures like re-entrancy attacks

It works more like sending emails than making blocking phone calls.

**2. Bit-level control over data**

**TON** lets you build and pack data bit by bit, not just in fixed 256-bit chunks like **Solidity**.

This means you can create:

-   custom formats 
-   super-compact data structures
-   optimized storage layouts

It’s like switching from “big boxes only” to “any size box you want.”

**3. Precise control over serialization and message formats**

In **TON**, you can construct messages, proofs, and data in exactly the format you need.

This is incredibly useful for:

-   on-chain proofs
-   custom protocols

**4. The Bag-of-Cells storage system**

Instead of **Ethereum’s** flat storage slots, **TVM** uses cells connected like a graph.

This gives you:

-   extremely small storage costs
-   easier serialization and message passing
-   flexible data trees
  
**5. Much more advanced cryptography**

**TVM** supports a wide range of modern cryptographic primitives, including:

-   SHA-256 / SHA-512
-   BLAKE2b
-   KECCAK
-   secp256k1 / secp256r1

**Solidity** gives you only *Keccak* and *secp256k1*.


### 8. Limitations of TVM compared to Solidity


**TVM** is a very capable and modern virtual machine, but the **Ethereum** ecosystem is older, larger, and more mature. **Solidity** developers benefit from more tools, more documentation, bigger communities, and years of security research. **TON** is progressing quickly, but it simply hasn’t had as much time to grow.

Even though **TVM** is powerful, flexible, and more modern than the **EVM** in many ways, it does have some limitations when compared to **Solidity** and the **Ethereum** ecosystem. Here are the main ones, explained simply:

**1. Fewer high-level languages**

On **Ethereum**, you can choose from many languages:

-   Solidity
-   Vyper
-   Yul
-   Fe, etc.

On **TON**, the main options are:

-   FunC
-   Tact (new, more user-friendly)
-   Fift (low-level, niche)

If you like having many language choices, **Ethereum** simply offers more.

**2. Smaller ecosystem and fewer tools**

**Ethereum** has been around longer, so **Solidity** developers have:

-   a huge amount of libraries
-   mature development tools
-   tons of tutorials and community support
-   battle-tested frameworks like *Hardhat, Foundry, Truffle*

**TON’s** developer ecosystem is growing fast, but it’s still newer and has fewer ready-made tools.

**3. Asynchronous model is powerful, but harder to reason about**

**TON’s** actor-based model (async messages) is extremely scalable,
but it also means:

-   contract interactions are less predictable
-   state updates happen across different message rounds
-   developers must think in terms of *“messages,”* not direct function calls

This can feel unfamiliar or complex for developers coming from **Solidity**.

**4. Fewer audits and security patterns**

**Solidity** has many years of:

-   security best practices
-   countless audited contracts
-   big audit firms specializing in EVM
-   well-known attack vectors

**TVM** contracts have fewer long-term audits to learn from, so developers need to be more careful.

**5. Smaller developer community**

-    **Ethereum’s** community is huge — millions of developers, researchers, educators.
-    **TON’s** community is active and growing rapidly, but still much smaller.
This means fewer StackOverflow answers, fewer GitHub repos, fewer tutorials, etc.



###### **Limitations of TVM Compared to Solidity/Ethereum**



| **Category** | **Ethereum / Solidity** | **TON / TVM** |
|--------------|------------------------|---------------|
| **1. High-level languages** | Many language choices: Solidity, Vyper, Yul, Fe, etc. | Limited options: FunC, Tact (new), Fift (low-level, niche) |
| **2. Ecosystem & tools** | Mature ecosystem: many libraries, battle-tested frameworks (Hardhat, Foundry, Truffle), tutorials, community support | Growing ecosystem, but fewer libraries, tools, and ready-made frameworks |
| **3. Execution model** | Synchronous, transaction-based; simpler to reason about | Actor-based, asynchronous messages; scalable but harder to reason about |
| **4. Audits & security patterns** | Many years of security practices, countless audited contracts, well-known attack vectors, specialized audit firms | Fewer long-term audits and established security patterns; developers need extra caution |
| **5. Developer community** | Huge community: millions of developers, educators, researchers | Active but smaller community; less documentation, fewer examples, fewer tutorials |